<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#1a1a2e">
  <title>Dock Site Survey</title>
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="icon-192.png">
  <meta name="apple-mobile-web-app-title" content="Dock Survey">
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;500;600;700&family=IBM+Plex+Mono:wght@500&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-primary: #0f0f14;
      --bg-secondary: #1a1a24;
      --bg-card: #22222e;
      --bg-input: #2a2a38;
      --accent: #f97316;
      --accent-hover: #fb923c;
      --accent-muted: rgba(249, 115, 22, 0.15);
      --text-primary: #f5f5f7;
      --text-secondary: #a1a1aa;
      --text-muted: #71717a;
      --border: #3f3f50;
      --success: #22c55e;
      --warning: #eab308;
      --danger: #ef4444;
      --radius: 12px;
      --radius-sm: 8px;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      -webkit-tap-highlight-color: transparent;
    }

    body {
      font-family: 'IBM Plex Sans', -apple-system, sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      min-height: 100vh;
      line-height: 1.5;
      padding-bottom: env(safe-area-inset-bottom);
    }

    /* Header */
    .app-header {
      background: linear-gradient(180deg, var(--bg-secondary) 0%, var(--bg-primary) 100%);
      padding: 16px 20px;
      position: sticky;
      top: 0;
      z-index: 100;
      border-bottom: 1px solid var(--border);
    }

    .app-title {
      font-size: 20px;
      font-weight: 700;
      letter-spacing: -0.02em;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .app-title svg {
      color: var(--accent);
    }

    /* Main Container */
    .container {
      max-width: 600px;
      margin: 0 auto;
      padding: 20px;
    }

    /* Section Cards */
    .section {
      background: var(--bg-card);
      border-radius: var(--radius);
      margin-bottom: 16px;
      overflow: hidden;
      border: 1px solid var(--border);
    }

    .section-header {
      padding: 16px 20px;
      background: var(--bg-secondary);
      border-bottom: 1px solid var(--border);
      display: flex;
      justify-content: space-between;
      align-items: center;
      cursor: pointer;
      user-select: none;
    }

    .section-header h2 {
      font-size: 15px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--text-secondary);
    }

    .section-header .toggle-icon {
      transition: transform 0.2s ease;
    }

    .section.collapsed .toggle-icon {
      transform: rotate(-90deg);
    }

    .section.collapsed .section-content {
      display: none;
    }

    .section-content {
      padding: 20px;
    }

    /* Form Elements */
    .form-group {
      margin-bottom: 16px;
    }

    .form-group:last-child {
      margin-bottom: 0;
    }

    label {
      display: block;
      font-size: 13px;
      font-weight: 500;
      color: var(--text-secondary);
      margin-bottom: 6px;
    }

    input[type="text"],
    input[type="number"],
    input[type="email"],
    input[type="date"],
    textarea {
      width: 100%;
      padding: 12px 14px;
      background: var(--bg-input);
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      color: var(--text-primary);
      font-family: inherit;
      font-size: 16px;
      transition: border-color 0.2s, box-shadow 0.2s;
    }

    input:focus,
    textarea:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 3px var(--accent-muted);
    }

    input::placeholder,
    textarea::placeholder {
      color: var(--text-muted);
    }

    textarea {
      resize: vertical;
      min-height: 80px;
    }

    /* Measurement Input Grid */
    .measurement-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
    }

    .measurement-grid.three-col {
      grid-template-columns: repeat(3, 1fr);
    }

    .measurement-input {
      position: relative;
    }

    .measurement-input label {
      font-family: 'IBM Plex Mono', monospace;
      font-size: 12px;
      color: var(--accent);
      margin-bottom: 4px;
    }

    .measurement-input input {
      padding-right: 30px;
    }

    .measurement-input .unit {
      position: absolute;
      right: 12px;
      bottom: 12px;
      font-size: 13px;
      color: var(--text-muted);
    }

    /* Checkbox/Radio Groups */
    .option-group {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .option-item {
      position: relative;
    }

    .option-item input {
      position: absolute;
      opacity: 0;
      cursor: pointer;
    }

    .option-item label {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 10px 14px;
      background: var(--bg-input);
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      cursor: pointer;
      transition: all 0.2s;
      font-size: 14px;
      color: var(--text-primary);
      margin-bottom: 0;
    }

    .option-item input:checked + label {
      background: var(--accent-muted);
      border-color: var(--accent);
      color: var(--accent);
    }

    .option-item label:active {
      transform: scale(0.98);
    }

    /* Condition Ratings */
    .condition-row {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 12px;
      flex-wrap: wrap;
    }

    .condition-row:last-child {
      margin-bottom: 0;
    }

    .condition-label {
      font-size: 14px;
      color: var(--text-primary);
      min-width: 120px;
    }

    .condition-options {
      display: flex;
      gap: 6px;
    }

    .condition-btn {
      padding: 6px 12px;
      border: 1px solid var(--border);
      background: var(--bg-input);
      border-radius: 20px;
      font-size: 13px;
      color: var(--text-secondary);
      cursor: pointer;
      transition: all 0.2s;
    }

    .condition-btn.good.active {
      background: rgba(34, 197, 94, 0.2);
      border-color: var(--success);
      color: var(--success);
    }

    .condition-btn.acceptable.active {
      background: rgba(234, 179, 8, 0.2);
      border-color: var(--warning);
      color: var(--warning);
    }

    .condition-btn.bad.active {
      background: rgba(239, 68, 68, 0.2);
      border-color: var(--danger);
      color: var(--danger);
    }

    /* Survey Type Selector */
    .survey-types {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .survey-type-btn {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 16px;
      background: var(--bg-input);
      border: 2px solid var(--border);
      border-radius: var(--radius);
      cursor: pointer;
      transition: all 0.2s;
    }

    .survey-type-btn.active {
      background: var(--accent-muted);
      border-color: var(--accent);
    }

    .survey-type-btn .icon {
      width: 40px;
      height: 40px;
      background: var(--bg-secondary);
      border-radius: var(--radius-sm);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .survey-type-btn.active .icon {
      background: var(--accent);
    }

    .survey-type-btn .icon svg {
      color: var(--text-secondary);
    }

    .survey-type-btn.active .icon svg {
      color: white;
    }

    .survey-type-btn .text h3 {
      font-size: 15px;
      font-weight: 600;
      margin-bottom: 2px;
    }

    .survey-type-btn .text p {
      font-size: 13px;
      color: var(--text-muted);
    }

    /* Diagram Container */
    .diagram-container {
      background: var(--bg-secondary);
      border-radius: var(--radius-sm);
      padding: 16px;
      margin-bottom: 20px;
    }

    .diagram-toggle {
      display: flex;
      align-items: center;
      justify-content: space-between;
      cursor: pointer;
      user-select: none;
    }

    .diagram-toggle span {
      font-size: 13px;
      font-weight: 500;
      color: var(--accent);
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .diagram-content {
      margin-top: 16px;
      display: none;
    }

    .diagram-content.show {
      display: block;
    }

    .diagram-svg {
      width: 100%;
      max-width: 100%;
      height: auto;
    }

    /* Position Tabs */
    .position-tabs {
      display: flex;
      gap: 8px;
      margin-bottom: 16px;
      overflow-x: auto;
      padding-bottom: 4px;
    }

    .position-tab {
      padding: 8px 16px;
      background: var(--bg-input);
      border: 1px solid var(--border);
      border-radius: 20px;
      font-size: 14px;
      font-weight: 500;
      color: var(--text-secondary);
      cursor: pointer;
      white-space: nowrap;
      transition: all 0.2s;
    }

    .position-tab.active {
      background: var(--accent);
      border-color: var(--accent);
      color: white;
    }

    .add-position-btn {
      padding: 8px 12px;
      background: transparent;
      border: 1px dashed var(--border);
      border-radius: 20px;
      font-size: 14px;
      color: var(--text-muted);
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 4px;
    }

    /* Action Buttons */
    .action-bar {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: var(--bg-secondary);
      border-top: 1px solid var(--border);
      padding: 16px 20px;
      padding-bottom: calc(16px + env(safe-area-inset-bottom));
      display: flex;
      gap: 12px;
      z-index: 100;
    }

    .btn {
      flex: 1;
      padding: 14px 20px;
      border-radius: var(--radius-sm);
      font-family: inherit;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      border: none;
    }

    .btn-primary {
      background: var(--accent);
      color: white;
    }

    .btn-primary:active {
      background: var(--accent-hover);
      transform: scale(0.98);
    }

    .btn-secondary {
      background: var(--bg-input);
      color: var(--text-primary);
      border: 1px solid var(--border);
    }

    .btn-secondary:active {
      background: var(--bg-secondary);
    }

    /* Modal */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.8);
      display: none;
      align-items: flex-end;
      justify-content: center;
      z-index: 200;
    }

    .modal-overlay.show {
      display: flex;
    }

    .modal {
      background: var(--bg-card);
      border-radius: var(--radius) var(--radius) 0 0;
      width: 100%;
      max-width: 500px;
      max-height: 90vh;
      overflow-y: auto;
      padding: 24px;
      padding-bottom: calc(24px + env(safe-area-inset-bottom));
    }

    .modal h2 {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 20px;
    }

    .modal-actions {
      display: flex;
      gap: 12px;
      margin-top: 24px;
    }

    /* Yes/No Toggle */
    .yes-no-toggle {
      display: flex;
      gap: 8px;
    }

    .yes-no-btn {
      padding: 8px 20px;
      border: 1px solid var(--border);
      background: var(--bg-input);
      border-radius: var(--radius-sm);
      font-size: 14px;
      color: var(--text-secondary);
      cursor: pointer;
      transition: all 0.2s;
    }

    .yes-no-btn.active {
      background: var(--accent-muted);
      border-color: var(--accent);
      color: var(--accent);
    }

    /* Spacer for fixed action bar */
    .action-spacer {
      height: 100px;
    }

    /* Truck/Trailer Row */
    .trailer-row {
      background: var(--bg-secondary);
      border-radius: var(--radius-sm);
      padding: 16px;
      margin-bottom: 12px;
    }

    .trailer-row h4 {
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 12px;
      color: var(--accent);
    }

    /* Checkbox grid for trailer types */
    .checkbox-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 8px;
    }

    @media (max-width: 400px) {
      .checkbox-grid {
        grid-template-columns: 1fr;
      }
    }

    /* Hidden sections */
    .survey-section {
      display: none;
    }

    .survey-section.active {
      display: block;
    }

    /* Toast notification */
    .toast {
      position: fixed;
      bottom: 100px;
      left: 50%;
      transform: translateX(-50%);
      background: var(--bg-card);
      border: 1px solid var(--success);
      color: var(--success);
      padding: 12px 24px;
      border-radius: var(--radius);
      font-size: 14px;
      font-weight: 500;
      z-index: 300;
      display: none;
    }

    .toast.show {
      display: block;
      animation: fadeInUp 0.3s ease;
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateX(-50%) translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateX(-50%) translateY(0);
      }
    }

    /* Wall/Jamb construction full width options */
    .construction-options {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }
  </style>
</head>
<body>
  <header class="app-header">
    <div class="app-title">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect>
        <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path>
      </svg>
      Dock Site Survey
    </div>
  </header>

  <main class="container">
    <!-- Job Info Section -->
    <div class="section">
      <div class="section-header" onclick="toggleSection(this)">
        <h2>Job Information</h2>
        <svg class="toggle-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"></polyline></svg>
      </div>
      <div class="section-content">
        <div class="form-group">
          <label>Customer Name</label>
          <input type="text" id="customerName" placeholder="ABC Company">
        </div>
        <div class="form-group">
          <label>Address</label>
          <input type="text" id="address" placeholder="123 Industrial Blvd">
        </div>
        <div class="form-group">
          <label>Date</label>
          <input type="date" id="surveyDate">
        </div>
        <div class="form-group">
          <label>Rep Name</label>
          <input type="text" id="repName" placeholder="Your name">
        </div>
      </div>
    </div>

    <!-- Survey Type Selection -->
    <div class="section">
      <div class="section-header" onclick="toggleSection(this)">
        <h2>Survey Type</h2>
        <svg class="toggle-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"></polyline></svg>
      </div>
      <div class="section-content">
        <div class="survey-types">
          <div class="survey-type-btn" onclick="toggleSurveyType('leveler', this)" data-type="leveler">
            <div class="icon">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M2 20h20"></path>
                <path d="M5 20V10l7-5 7 5v10"></path>
                <path d="M9 20v-6h6v6"></path>
              </svg>
            </div>
            <div class="text">
              <h3>Dock Leveler</h3>
              <p>Pit dimensions & construction</p>
            </div>
          </div>
          <div class="survey-type-btn" onclick="toggleSurveyType('shelter', this)" data-type="shelter">
            <div class="icon">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="3" width="18" height="18" rx="2"></rect>
                <path d="M9 3v18"></path>
                <path d="M15 3v18"></path>
              </svg>
            </div>
            <div class="text">
              <h3>Dock Seal/Shelter</h3>
              <p>Door & building measurements</p>
            </div>
          </div>
          <div class="survey-type-btn" onclick="toggleSurveyType('restraint', this)" data-type="restraint">
            <div class="icon">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"></circle>
                <path d="M12 8v8"></path>
                <path d="M8 12h8"></path>
              </svg>
            </div>
            <div class="text">
              <h3>Vehicle Restraint</h3>
              <p>Grade, cantilever & trailer info</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Position Selector (shows when survey type selected) -->
    <div id="positionSelector" style="display: none;">
      <div class="position-tabs">
        <button class="position-tab active" data-position="1">Position 1</button>
        <button class="add-position-btn" onclick="addPosition()">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
          Add
        </button>
      </div>
    </div>

    <!-- DOCK LEVELER SECTION -->
    <div id="levelerSection" class="survey-section">
      <div class="section">
        <div class="section-header" onclick="toggleSection(this)">
          <h2>Dock Leveler Pit Info</h2>
          <svg class="toggle-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"></polyline></svg>
        </div>
        <div class="section-content">
          <!-- Diagram -->
          <div class="diagram-container">
            <div class="diagram-toggle" onclick="toggleDiagram(this)">
              <span>
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><path d="M21 15l-5-5L5 21"/></svg>
                View Diagram
              </span>
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </div>
            <div class="diagram-content">
              <svg class="diagram-svg" viewBox="0 0 400 280" fill="none" xmlns="http://www.w3.org/2000/svg">
                <!-- Pit Isometric View -->
                <text x="100" y="20" fill="#a1a1aa" font-size="11" font-weight="500">PIT ISOMETRIC VIEW</text>
                <!-- 3D Pit shape -->
                <path d="M30 180 L30 100 L150 60 L150 140 L30 180 Z" fill="#2a2a38" stroke="#f97316" stroke-width="1.5"/>
                <path d="M30 180 L150 140 L180 160 L60 200 L30 180 Z" fill="#22222e" stroke="#f97316" stroke-width="1.5"/>
                <path d="M150 60 L180 80 L180 160 L150 140 L150 60 Z" fill="#1a1a24" stroke="#f97316" stroke-width="1.5"/>
                <!-- Dimension labels -->
                <text x="85" y="50" fill="#f97316" font-size="12" font-weight="600" font-family="IBM Plex Mono">A</text>
                <text x="20" y="140" fill="#f97316" font-size="12" font-weight="600" font-family="IBM Plex Mono">B</text>
                <text x="115" y="170" fill="#f97316" font-size="12" font-weight="600" font-family="IBM Plex Mono">C</text>
                <text x="165" y="120" fill="#f97316" font-size="12" font-weight="600" font-family="IBM Plex Mono">D</text>
                <text x="75" y="95" fill="#f97316" font-size="12" font-weight="600" font-family="IBM Plex Mono">E</text>
                <text x="110" y="115" fill="#f97316" font-size="12" font-weight="600" font-family="IBM Plex Mono">F</text>
                <!-- J-Box markers -->
                <circle cx="45" cy="120" r="4" fill="#f97316"/>
                <text x="55" y="110" fill="#f97316" font-size="10" font-family="IBM Plex Mono">K</text>
                <text x="55" y="130" fill="#f97316" font-size="10" font-family="IBM Plex Mono">L</text>

                <!-- Side View -->
                <text x="280" y="20" fill="#a1a1aa" font-size="11" font-weight="500">SIDE VIEW</text>
                <!-- Building wall -->
                <rect x="240" y="40" width="15" height="120" fill="#3f3f50"/>
                <text x="235" y="100" fill="#71717a" font-size="8" transform="rotate(-90 235 100)">BUILDING</text>
                <!-- Dock surface -->
                <rect x="255" y="100" width="80" height="10" fill="#f97316" opacity="0.3" stroke="#f97316" stroke-width="1"/>
                <!-- Bumper -->
                <rect x="255" y="110" width="15" height="30" fill="#3f3f50" stroke="#f97316" stroke-width="1"/>
                <!-- Ground/Drive -->
                <rect x="255" y="160" width="120" height="8" fill="#2a2a38"/>
                <!-- Dimension lines -->
                <line x1="335" y1="100" x2="335" y2="160" stroke="#f97316" stroke-width="1" stroke-dasharray="3"/>
                <text x="345" y="135" fill="#f97316" font-size="12" font-weight="600" font-family="IBM Plex Mono">G</text>
                <line x1="320" y1="110" x2="320" y2="160" stroke="#f97316" stroke-width="1" stroke-dasharray="3"/>
                <text x="305" y="145" fill="#f97316" font-size="12" font-weight="600" font-family="IBM Plex Mono">H</text>
                <line x1="255" y1="125" x2="270" y2="125" stroke="#f97316" stroke-width="1"/>
                <text x="260" y="120" fill="#f97316" font-size="12" font-weight="600" font-family="IBM Plex Mono">J</text>

                <!-- Legend -->
                <text x="30" y="230" fill="#71717a" font-size="9">A = Pit Length | B = Pit Width | C = Front Depth | D = Rear Depth</text>
                <text x="30" y="245" fill="#71717a" font-size="9">E = Diagonal 1 | F = Diagonal 2 | G = Dock Height | H = Pit Floor to Drive</text>
                <text x="30" y="260" fill="#71717a" font-size="9">J = Bumper Projection | K = J-Box Horizontal | L = J-Box Vertical</text>
              </svg>
            </div>
          </div>

          <!-- Pit Measurements -->
          <h3 style="font-size: 14px; font-weight: 600; margin-bottom: 12px; color: var(--text-secondary);">Pit Measurements</h3>
          <div class="measurement-grid">
            <div class="measurement-input">
              <label>A (Pit Length)</label>
              <input type="number" inputmode="decimal" placeholder="0">
              <span class="unit">in</span>
            </div>
            <div class="measurement-input">
              <label>B (Pit Width)</label>
              <input type="number" inputmode="decimal" placeholder="0">
              <span class="unit">in</span>
            </div>
            <div class="measurement-input">
              <label>C (Front Depth)</label>
              <input type="number" inputmode="decimal" placeholder="0">
              <span class="unit">in</span>
            </div>
            <div class="measurement-input">
              <label>D (Rear Depth)</label>
              <input type="number" inputmode="decimal" placeholder="0">
              <span class="unit">in</span>
            </div>
            <div class="measurement-input">
              <label>E (Diagonal 1)</label>
              <input type="number" inputmode="decimal" placeholder="0">
              <span class="unit">in</span>
            </div>
            <div class="measurement-input">
              <label>F (Diagonal 2)</label>
              <input type="number" inputmode="decimal" placeholder="0">
              <span class="unit">in</span>
            </div>
            <div class="measurement-input">
              <label>G (Dock Height)</label>
              <input type="number" inputmode="decimal" placeholder="0">
              <span class="unit">in</span>
            </div>
            <div class="measurement-input">
              <label>H (Pit to Drive)</label>
              <input type="number" inputmode="decimal" placeholder="0">
              <span class="unit">in</span>
            </div>
            <div class="measurement-input">
              <label>J (Bumper Proj.)</label>
              <input type="number" inputmode="decimal" placeholder="0">
              <span class="unit">in</span>
            </div>
            <div class="measurement-input">
              <label>K (J-Box Horiz.)</label>
              <input type="number" inputmode="decimal" placeholder="0">
              <span class="unit">in</span>
            </div>
            <div class="measurement-input">
              <label>L (J-Box Vert.)</label>
              <input type="number" inputmode="decimal" placeholder="0">
              <span class="unit">in</span>
            </div>
          </div>

          <!-- Pit Construction -->
          <h3 style="font-size: 14px; font-weight: 600; margin: 20px 0 12px; color: var(--text-secondary);">Pit Construction</h3>
          <div class="form-group">
            <label>Construction Type</label>
            <div class="option-group">
              <div class="option-item">
                <input type="radio" name="pitConstruction" id="pitNew" value="new">
                <label for="pitNew">New Construction</label>
              </div>
              <div class="option-item">
                <input type="radio" name="pitConstruction" id="pitExisting" value="existing">
                <label for="pitExisting">Existing Pit</label>
              </div>
            </div>
          </div>

          <div id="existingPitConditions" style="display: none;">
            <div class="form-group">
              <label>Existing Pit Conditions</label>
              <div class="condition-row">
                <span class="condition-label">Concrete:</span>
                <div class="condition-options">
                  <button type="button" class="condition-btn good" onclick="setCondition(this, 'concreteCondition', 'good')">Good</button>
                  <button type="button" class="condition-btn acceptable" onclick="setCondition(this, 'concreteCondition', 'acceptable')">OK</button>
                  <button type="button" class="condition-btn bad" onclick="setCondition(this, 'concreteCondition', 'bad')">Bad</button>
                </div>
              </div>
              <div class="condition-row">
                <span class="condition-label">Curb Angle:</span>
                <div class="condition-options">
                  <button type="button" class="condition-btn good" onclick="setCondition(this, 'curbCondition', 'good')">Good</button>
                  <button type="button" class="condition-btn acceptable" onclick="setCondition(this, 'curbCondition', 'acceptable')">OK</button>
                  <button type="button" class="condition-btn bad" onclick="setCondition(this, 'curbCondition', 'bad')">Bad</button>
                </div>
              </div>
            </div>

            <div class="form-group">
              <label>Existing J-Box or conduit in pit?</label>
              <div class="yes-no-toggle">
                <button type="button" class="yes-no-btn" onclick="setYesNo(this, 'jboxExists', true)">Yes</button>
                <button type="button" class="yes-no-btn" onclick="setYesNo(this, 'jboxExists', false)">No</button>
              </div>
            </div>

            <div class="form-group">
              <label>Existing hose chase(s) in pit?</label>
              <div class="yes-no-toggle">
                <button type="button" class="yes-no-btn" onclick="setYesNo(this, 'hoseChase', true)">Yes</button>
                <button type="button" class="yes-no-btn" onclick="setYesNo(this, 'hoseChase', false)">No</button>
              </div>
            </div>
          </div>

          <div class="form-group" style="margin-top: 16px;">
            <label>Notes</label>
            <textarea id="levelerNotes" placeholder="Additional notes about the pit..."></textarea>
          </div>
        </div>
      </div>
    </div>

    <!-- DOCK SEAL/SHELTER SECTION -->
    <div id="shelterSection" class="survey-section">
      <div class="section">
        <div class="section-header" onclick="toggleSection(this)">
          <h2>Dock Seal/Shelter Info</h2>
          <svg class="toggle-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"></polyline></svg>
        </div>
        <div class="section-content">
          <!-- Diagram -->
          <div class="diagram-container">
            <div class="diagram-toggle" onclick="toggleDiagram(this)">
              <span>
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><path d="M21 15l-5-5L5 21"/></svg>
                View Diagram
              </span>
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </div>
            <div class="diagram-content">
              <svg class="diagram-svg" viewBox="0 0 400 300" fill="none" xmlns="http://www.w3.org/2000/svg">
                <!-- Front View -->
                <text x="100" y="20" fill="#a1a1aa" font-size="11" font-weight="500">FRONT VIEW</text>
                <!-- Canopy -->
                <rect x="20" y="35" width="160" height="8" fill="#3f3f50" stroke="#71717a" stroke-width="1"/>
                <text x="90" y="30" fill="#71717a" font-size="8">CANOPY/OVERHANG</text>
                <!-- Wall -->
                <rect x="20" y="43" width="160" height="140" fill="#2a2a38" stroke="#71717a" stroke-width="1"/>
                <!-- Door Opening -->
                <rect x="50" y="63" width="100" height="110" fill="#1a1a24" stroke="#f97316" stroke-width="1.5"/>
                <!-- Traffic light -->
                <circle cx="40" cy="90" r="6" fill="#22c55e" opacity="0.5"/>
                <circle cx="40" cy="105" r="6" fill="#eab308" opacity="0.3"/>
                <circle cx="40" cy="120" r="6" fill="#ef4444" opacity="0.3"/>
                <!-- Dimension lines -->
                <line x1="50" y1="180" x2="150" y2="180" stroke="#f97316" stroke-width="1"/>
                <text x="95" y="195" fill="#f97316" font-size="12" font-weight="600" font-family="IBM Plex Mono">A</text>
                <line x1="155" y1="63" x2="155" y2="173" stroke="#f97316" stroke-width="1"/>
                <text x="160" y="120" fill="#f97316" font-size="12" font-weight="600" font-family="IBM Plex Mono">B</text>
                <!-- Door spacing -->
                <line x1="150" y1="200" x2="180" y2="200" stroke="#f97316" stroke-width="1" stroke-dasharray="3"/>
                <text x="160" y="215" fill="#f97316" font-size="12" font-weight="600" font-family="IBM Plex Mono">C</text>
                <!-- Canopy height -->
                <line x1="15" y1="35" x2="15" y2="63" stroke="#f97316" stroke-width="1"/>
                <text x="5" y="50" fill="#f97316" font-size="12" font-weight="600" font-family="IBM Plex Mono">E</text>
                <line x1="8" y1="35" x2="8" y2="183" stroke="#f97316" stroke-width="1" stroke-dasharray="3"/>
                <text x="0" y="110" fill="#f97316" font-size="12" font-weight="600" font-family="IBM Plex Mono">D</text>

                <!-- Side View -->
                <text x="290" y="20" fill="#a1a1aa" font-size="11" font-weight="500">SIDE VIEW</text>
                <!-- Building wall -->
                <rect x="250" y="43" width="15" height="140" fill="#3f3f50"/>
                <text x="245" y="120" fill="#71717a" font-size="8" transform="rotate(-90 245 120)">BUILDING</text>
                <!-- Dock surface -->
                <rect x="265" y="140" width="60" height="10" fill="#f97316" opacity="0.3" stroke="#f97316" stroke-width="1"/>
                <!-- Bumper -->
                <rect x="265" y="150" width="12" height="25" fill="#3f3f50" stroke="#f97316" stroke-width="1"/>
                <!-- Ground -->
                <rect x="265" y="183" width="100" height="6" fill="#2a2a38"/>
                <!-- Dimension lines -->
                <line x1="330" y1="140" x2="330" y2="183" stroke="#f97316" stroke-width="1" stroke-dasharray="3"/>
                <text x="340" y="165" fill="#f97316" font-size="12" font-weight="600" font-family="IBM Plex Mono">F</text>
                <!-- Wall setback -->
                <line x1="265" y1="165" x2="277" y2="165" stroke="#f97316" stroke-width="1"/>
                <text x="268" y="162" fill="#f97316" font-size="12" font-weight="600" font-family="IBM Plex Mono">H</text>
                <text x="278" y="175" fill="#f97316" font-size="12" font-weight="600" font-family="IBM Plex Mono">J</text>
                <!-- Door to obstruction -->
                <line x1="265" y1="80" x2="310" y2="80" stroke="#f97316" stroke-width="1" stroke-dasharray="3"/>
                <text x="285" y="75" fill="#f97316" font-size="12" font-weight="600" font-family="IBM Plex Mono">G</text>

                <!-- Legend -->
                <text x="20" y="240" fill="#71717a" font-size="9">A = Door Width | B = Door Height | C = Door Spacing | D = Canopy Height</text>
                <text x="20" y="255" fill="#71717a" font-size="9">E = Door to Canopy | F = Dock Height | G = Door to Obstruction</text>
                <text x="20" y="270" fill="#71717a" font-size="9">H = Wall Setback | J = Bumper Projection</text>
              </svg>
            </div>
          </div>

          <!-- Door Measurements -->
          <h3 style="font-size: 14px; font-weight: 600; margin-bottom: 12px; color: var(--text-secondary);">Door & Building Measurements</h3>
          <div class="measurement-grid">
            <div class="measurement-input">
              <label>A (Door Width)</label>
              <input type="number" inputmode="decimal" placeholder="0">
              <span class="unit">in</span>
            </div>
            <div class="measurement-input">
              <label>B (Door Height)</label>
              <input type="number" inputmode="decimal" placeholder="0">
              <span class="unit">in</span>
            </div>
            <div class="measurement-input">
              <label>C (Door Spacing)</label>
              <input type="number" inputmode="decimal" placeholder="0">
              <span class="unit">in</span>
            </div>
            <div class="measurement-input">
              <label>D (Canopy Ht.)</label>
              <input type="number" inputmode="decimal" placeholder="0">
              <span class="unit">in</span>
            </div>
            <div class="measurement-input">
              <label>E (Door to Canopy)</label>
              <input type="number" inputmode="decimal" placeholder="0">
              <span class="unit">in</span>
            </div>
            <div class="measurement-input">
              <label>F (Dock Height)</label>
              <input type="number" inputmode="decimal" placeholder="0">
              <span class="unit">in</span>
            </div>
            <div class="measurement-input">
              <label>G (to Obstruction)</label>
              <input type="number" inputmode="decimal" placeholder="0">
              <span class="unit">in</span>
            </div>
            <div class="measurement-input">
              <label>H (Wall Setback)</label>
              <input type="number" inputmode="decimal" placeholder="0">
              <span class="unit">in</span>
            </div>
            <div class="measurement-input">
              <label>J (Bumper Proj.)</label>
              <input type="number" inputmode="decimal" placeholder="0">
              <span class="unit">in</span>
            </div>
          </div>

          <!-- Wall Construction -->
          <h3 style="font-size: 14px; font-weight: 600; margin: 20px 0 12px; color: var(--text-secondary);">Wall Construction</h3>
          <div class="construction-options">
            <div class="option-item">
              <input type="checkbox" id="wallMasonry">
              <label for="wallMasonry">Masonry</label>
            </div>
            <div class="option-item">
              <input type="checkbox" id="wallMetal">
              <label for="wallMetal">Metal</label>
            </div>
            <div class="option-item">
              <input type="checkbox" id="wallWood">
              <label for="wallWood">Wood</label>
            </div>
            <div class="option-item">
              <input type="checkbox" id="wallConcrete">
              <label for="wallConcrete">Concrete</label>
            </div>
            <div class="option-item">
              <input type="checkbox" id="wallInsulated">
              <label for="wallInsulated">Insulated</label>
            </div>
            <div class="option-item">
              <input type="checkbox" id="wallCorrugated">
              <label for="wallCorrugated">Corrugated</label>
            </div>
          </div>

          <!-- Jamb Construction -->
          <h3 style="font-size: 14px; font-weight: 600; margin: 20px 0 12px; color: var(--text-secondary);">Door Jamb Construction</h3>
          <div class="construction-options">
            <div class="option-item">
              <input type="checkbox" id="jambMasonry">
              <label for="jambMasonry">Masonry</label>
            </div>
            <div class="option-item">
              <input type="checkbox" id="jambMetal">
              <label for="jambMetal">Metal</label>
            </div>
            <div class="option-item">
              <input type="checkbox" id="jambWood">
              <label for="jambWood">Wood</label>
            </div>
            <div class="option-item">
              <input type="checkbox" id="jambConcrete">
              <label for="jambConcrete">Concrete</label>
            </div>
          </div>

          <div class="form-group" style="margin-top: 16px;">
            <label>Notes</label>
            <textarea id="shelterNotes" placeholder="Additional notes about door/shelter..."></textarea>
          </div>
        </div>
      </div>
    </div>

    <!-- VEHICLE RESTRAINT SECTION -->
    <div id="restraintSection" class="survey-section">
      <!-- Grade and Cantilever -->
      <div class="section">
        <div class="section-header" onclick="toggleSection(this)">
          <h2>Grade & Cantilever Info</h2>
          <svg class="toggle-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"></polyline></svg>
        </div>
        <div class="section-content">
          <!-- Diagram -->
          <div class="diagram-container">
            <div class="diagram-toggle" onclick="toggleDiagram(this)">
              <span>
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><path d="M21 15l-5-5L5 21"/></svg>
                View Diagram
              </span>
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </div>
            <div class="diagram-content">
              <svg class="diagram-svg" viewBox="0 0 400 250" fill="none" xmlns="http://www.w3.org/2000/svg">
                <text x="150" y="20" fill="#a1a1aa" font-size="11" font-weight="500">GRADE & CANTILEVER SIDE VIEW</text>
                <!-- 50 FT marker -->
                <line x1="80" y1="35" x2="350" y2="35" stroke="#71717a" stroke-width="1"/>
                <text x="200" y="30" fill="#71717a" font-size="9">50 FT</text>
                <!-- Building wall -->
                <rect x="50" y="50" width="15" height="130" fill="#3f3f50"/>
                <text x="45" y="120" fill="#71717a" font-size="8" transform="rotate(-90 45 120)">BUILDING</text>
                <!-- Dock surface and cantilever -->
                <rect x="65" y="100" width="50" height="8" fill="#f97316" opacity="0.3" stroke="#f97316" stroke-width="1"/>
                <!-- Cantilever overhang -->
                <rect x="115" y="100" width="25" height="8" fill="#f97316" opacity="0.5" stroke="#f97316" stroke-width="1.5"/>
                <!-- Bumper -->
                <rect x="65" y="108" width="12" height="22" fill="#3f3f50" stroke="#f97316" stroke-width="1"/>
                <!-- Ground/Drive with grade -->
                <path d="M65 180 L200 180 L200 165 L280 165 L350 180 L350 185 L65 185 Z" fill="#2a2a38"/>
                <!-- Incline area -->
                <path d="M200 180 L200 165 L280 165 L280 180 Z" fill="#3f3f50" opacity="0.5"/>
                <!-- Trench drain -->
                <rect x="160" y="175" width="20" height="8" fill="#1a1a24" stroke="#71717a" stroke-width="1"/>
                
                <!-- Dimension markers -->
                <text x="72" y="95" fill="#f97316" font-size="11" font-weight="600" font-family="IBM Plex Mono">A</text>
                <text x="58" y="95" fill="#f97316" font-size="11" font-weight="600" font-family="IBM Plex Mono">B</text>
                <line x1="145" y1="100" x2="145" y2="180" stroke="#f97316" stroke-width="1" stroke-dasharray="3"/>
                <text x="150" y="145" fill="#f97316" font-size="11" font-weight="600" font-family="IBM Plex Mono">C</text>
                <line x1="350" y1="50" x2="350" y2="180" stroke="#f97316" stroke-width="1" stroke-dasharray="3"/>
                <text x="355" y="120" fill="#f97316" font-size="11" font-weight="600" font-family="IBM Plex Mono">D</text>
                <text x="125" y="95" fill="#f97316" font-size="11" font-weight="600" font-family="IBM Plex Mono">J</text>
                <text x="125" y="125" fill="#f97316" font-size="11" font-weight="600" font-family="IBM Plex Mono">K</text>
                <line x1="140" y1="108" x2="140" y2="165" stroke="#f97316" stroke-width="1"/>
                <text x="145" y="140" fill="#f97316" font-size="11" font-weight="600" font-family="IBM Plex Mono">E</text>
                <!-- Incline dimensions -->
                <text x="200" y="160" fill="#f97316" font-size="11" font-weight="600" font-family="IBM Plex Mono">F</text>
                <text x="235" y="160" fill="#f97316" font-size="11" font-weight="600" font-family="IBM Plex Mono">G</text>
                <text x="260" y="175" fill="#f97316" font-size="11" font-weight="600" font-family="IBM Plex Mono">H</text>
                <!-- Trench drain -->
                <text x="165" y="200" fill="#f97316" font-size="11" font-weight="600" font-family="IBM Plex Mono">L</text>
                <text x="185" y="200" fill="#f97316" font-size="11" font-weight="600" font-family="IBM Plex Mono">M</text>

                <!-- Legend -->
                <text x="30" y="220" fill="#71717a" font-size="8">A = Bumper Proj. | B = Wall Setback | C = Dock Ht. | D = Dock Ht. @ 50ft | E = Lip to Drive</text>
                <text x="30" y="232" fill="#71717a" font-size="8">F = Face to Incline | G = Incline Length | H = Incline Ht. | J = Cantilever | K = Cant. Ht.</text>
                <text x="30" y="244" fill="#71717a" font-size="8">L = Face to Trench | M = Trench Length</text>
              </svg>
            </div>
          </div>

          <h3 style="font-size: 14px; font-weight: 600; margin-bottom: 12px; color: var(--text-secondary);">Grade & Cantilever Measurements</h3>
          <div class="measurement-grid">
            <div class="measurement-input">
              <label>A (Bumper Proj.)</label>
              <input type="number" inputmode="decimal" placeholder="0">
              <span class="unit">in</span>
            </div>
            <div class="measurement-input">
              <label>B (Wall Setback)</label>
              <input type="number" inputmode="decimal" placeholder="0">
              <span class="unit">in</span>
            </div>
            <div class="measurement-input">
              <label>C (Dock Height)</label>
              <input type="number" inputmode="decimal" placeholder="0">
              <span class="unit">in</span>
            </div>
            <div class="measurement-input">
              <label>D (Dock @ 50ft)</label>
              <input type="number" inputmode="decimal" placeholder="0">
              <span class="unit">in</span>
            </div>
            <div class="measurement-input">
              <label>E (Lip to Drive)</label>
              <input type="number" inputmode="decimal" placeholder="0">
              <span class="unit">in</span>
            </div>
            <div class="measurement-input">
              <label>F (to Incline)</label>
              <input type="number" inputmode="decimal" placeholder="0">
              <span class="unit">in</span>
            </div>
            <div class="measurement-input">
              <label>G (Incline Len.)</label>
              <input type="number" inputmode="decimal" placeholder="0">
              <span class="unit">in</span>
            </div>
            <div class="measurement-input">
              <label>H (Incline Ht.)</label>
              <input type="number" inputmode="decimal" placeholder="0">
              <span class="unit">in</span>
            </div>
            <div class="measurement-input">
              <label>J (Cantilever)</label>
              <input type="number" inputmode="decimal" placeholder="0">
              <span class="unit">in</span>
            </div>
            <div class="measurement-input">
              <label>K (Cant. Ht.)</label>
              <input type="number" inputmode="decimal" placeholder="0">
              <span class="unit">in</span>
            </div>
            <div class="measurement-input">
              <label>L (to Trench)</label>
              <input type="number" inputmode="decimal" placeholder="0">
              <span class="unit">in</span>
            </div>
            <div class="measurement-input">
              <label>M (Trench Len.)</label>
              <input type="number" inputmode="decimal" placeholder="0">
              <span class="unit">in</span>
            </div>
          </div>

          <h3 style="font-size: 14px; font-weight: 600; margin: 20px 0 12px; color: var(--text-secondary);">Building & Drive Construction</h3>
          <div class="form-group">
            <label>Dock Face Construction</label>
            <div class="option-group">
              <div class="option-item">
                <input type="radio" name="dockFace" id="dockConcrete" value="concrete">
                <label for="dockConcrete">Concrete ≥ 8"</label>
              </div>
              <div class="option-item">
                <input type="radio" name="dockFace" id="dockMasonry" value="masonry">
                <label for="dockMasonry">Masonry/Block</label>
              </div>
              <div class="option-item">
                <input type="radio" name="dockFace" id="dockOther" value="other">
                <label for="dockOther">Other</label>
              </div>
            </div>
          </div>

          <div class="form-group">
            <label>Drive Construction</label>
            <div class="option-group">
              <div class="option-item">
                <input type="radio" name="driveConstruction" id="driveConcrete" value="concrete">
                <label for="driveConcrete">Concrete ≥ 8"</label>
              </div>
              <div class="option-item">
                <input type="radio" name="driveConstruction" id="driveAsphalt" value="asphalt">
                <label for="driveAsphalt">Asphalt</label>
              </div>
              <div class="option-item">
                <input type="radio" name="driveConstruction" id="driveOther" value="other">
                <label for="driveOther">Other</label>
              </div>
            </div>
          </div>

          <div class="form-group">
            <label>Existing restraint embed or concrete pad?</label>
            <input type="text" id="existingRestraint" placeholder="Size, condition...">
          </div>

          <div class="form-group">
            <label>Notes</label>
            <textarea id="gradeNotes" placeholder="Additional notes..."></textarea>
          </div>
        </div>
      </div>

      <!-- Truck/Trailer Info -->
      <div class="section">
        <div class="section-header" onclick="toggleSection(this)">
          <h2>Truck & Trailer Info</h2>
          <svg class="toggle-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"></polyline></svg>
        </div>
        <div class="section-content">
          <!-- Diagram -->
          <div class="diagram-container">
            <div class="diagram-toggle" onclick="toggleDiagram(this)">
              <span>
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><path d="M21 15l-5-5L5 21"/></svg>
                View Diagram
              </span>
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </div>
            <div class="diagram-content">
              <svg class="diagram-svg" viewBox="0 0 400 180" fill="none" xmlns="http://www.w3.org/2000/svg">
                <text x="150" y="20" fill="#a1a1aa" font-size="11" font-weight="500">TRAILER REAR VIEW</text>
                <!-- Trailer body -->
                <rect x="100" y="35" width="200" height="100" fill="#2a2a38" stroke="#71717a" stroke-width="1.5"/>
                <!-- Trailer floor/platform -->
                <rect x="100" y="125" width="200" height="10" fill="#3f3f50" stroke="#f97316" stroke-width="1"/>
                <!-- RIG bar -->
                <rect x="120" y="135" width="160" height="8" fill="#f97316" opacity="0.4" stroke="#f97316" stroke-width="1.5"/>
                <!-- Wheels -->
                <circle cx="130" cy="155" r="12" fill="#1a1a24" stroke="#71717a" stroke-width="2"/>
                <circle cx="160" cy="155" r="12" fill="#1a1a24" stroke="#71717a" stroke-width="2"/>
                <circle cx="240" cy="155" r="12" fill="#1a1a24" stroke="#71717a" stroke-width="2"/>
                <circle cx="270" cy="155" r="12" fill="#1a1a24" stroke="#71717a" stroke-width="2"/>
                <!-- Ground -->
                <line x1="80" y1="167" x2="320" y2="167" stroke="#71717a" stroke-width="1"/>

                <!-- Dimension markers -->
                <line x1="310" y1="35" x2="310" y2="135" stroke="#f97316" stroke-width="1" stroke-dasharray="3"/>
                <text x="315" y="90" fill="#f97316" font-size="12" font-weight="600" font-family="IBM Plex Mono">C</text>
                <line x1="320" y1="125" x2="320" y2="167" stroke="#f97316" stroke-width="1"/>
                <text x="325" y="150" fill="#f97316" font-size="12" font-weight="600" font-family="IBM Plex Mono">B</text>
                <line x1="330" y1="135" x2="330" y2="167" stroke="#f97316" stroke-width="1" stroke-dasharray="3"/>
                <text x="335" y="155" fill="#f97316" font-size="12" font-weight="600" font-family="IBM Plex Mono">A</text>
                <!-- RIG bar size -->
                <line x1="120" y1="148" x2="150" y2="148" stroke="#f97316" stroke-width="1"/>
                <text x="130" y="158" fill="#f97316" font-size="12" font-weight="600" font-family="IBM Plex Mono">D</text>

                <!-- Legend -->
                <text x="100" y="178" fill="#71717a" font-size="9">A = RIG Bar Height | B = Platform Height | C = Trailer Height | D = RIG Bar Size</text>
              </svg>
            </div>
          </div>

          <!-- Trailer measurements -->
          <div class="trailer-row">
            <h4>Truck/Trailer 1</h4>
            <div class="measurement-grid">
              <div class="measurement-input">
                <label>A (RIG Bar Ht.)</label>
                <input type="number" inputmode="decimal" placeholder="0">
                <span class="unit">in</span>
              </div>
              <div class="measurement-input">
                <label>B (Platform Ht.)</label>
                <input type="number" inputmode="decimal" placeholder="0">
                <span class="unit">in</span>
              </div>
              <div class="measurement-input">
                <label>C (Trailer Ht.)</label>
                <input type="number" inputmode="decimal" placeholder="0">
                <span class="unit">in</span>
              </div>
              <div class="measurement-input">
                <label>D (RIG Bar Size)</label>
                <input type="text" placeholder="e.g. 4x4">
              </div>
            </div>
          </div>

          <div class="trailer-row">
            <h4>Truck/Trailer 2</h4>
            <div class="measurement-grid">
              <div class="measurement-input">
                <label>A (RIG Bar Ht.)</label>
                <input type="number" inputmode="decimal" placeholder="0">
                <span class="unit">in</span>
              </div>
              <div class="measurement-input">
                <label>B (Platform Ht.)</label>
                <input type="number" inputmode="decimal" placeholder="0">
                <span class="unit">in</span>
              </div>
              <div class="measurement-input">
                <label>C (Trailer Ht.)</label>
                <input type="number" inputmode="decimal" placeholder="0">
                <span class="unit">in</span>
              </div>
              <div class="measurement-input">
                <label>D (RIG Bar Size)</label>
                <input type="text" placeholder="e.g. 4x4">
              </div>
            </div>
          </div>

          <div class="trailer-row">
            <h4>Truck/Trailer 3</h4>
            <div class="measurement-grid">
              <div class="measurement-input">
                <label>A (RIG Bar Ht.)</label>
                <input type="number" inputmode="decimal" placeholder="0">
                <span class="unit">in</span>
              </div>
              <div class="measurement-input">
                <label>B (Platform Ht.)</label>
                <input type="number" inputmode="decimal" placeholder="0">
                <span class="unit">in</span>
              </div>
              <div class="measurement-input">
                <label>C (Trailer Ht.)</label>
                <input type="number" inputmode="decimal" placeholder="0">
                <span class="unit">in</span>
              </div>
              <div class="measurement-input">
                <label>D (RIG Bar Size)</label>
                <input type="text" placeholder="e.g. 4x4">
              </div>
            </div>
          </div>

          <h3 style="font-size: 14px; font-weight: 600; margin: 20px 0 12px; color: var(--text-secondary);">Trailer Types Used</h3>
          <div class="checkbox-grid">
            <div class="option-item">
              <input type="checkbox" id="typeLTL">
              <label for="typeLTL">LTL</label>
            </div>
            <div class="option-item">
              <input type="checkbox" id="typeFlatbed">
              <label for="typeFlatbed">Flatbed</label>
            </div>
            <div class="option-item">
              <input type="checkbox" id="typeContainer">
              <label for="typeContainer">Container</label>
            </div>
            <div class="option-item">
              <input type="checkbox" id="typeRefrigerated">
              <label for="typeRefrigerated">Refrigerated</label>
            </div>
            <div class="option-item">
              <input type="checkbox" id="typeHighCube">
              <label for="typeHighCube">High Cube</label>
            </div>
            <div class="option-item">
              <input type="checkbox" id="typeStepVan">
              <label for="typeStepVan">Step Van</label>
            </div>
            <div class="option-item">
              <input type="checkbox" id="typeCargoVan">
              <label for="typeCargoVan">Cargo Van</label>
            </div>
          </div>

          <h3 style="font-size: 14px; font-weight: 600; margin: 20px 0 12px; color: var(--text-secondary);">Special Considerations</h3>
          <div class="form-group">
            <label>Yard Jockey usage?</label>
            <div class="yes-no-toggle">
              <button type="button" class="yes-no-btn" onclick="setYesNo(this, 'yardJockey', true)">Yes</button>
              <button type="button" class="yes-no-btn" onclick="setYesNo(this, 'yardJockey', false)">No</button>
            </div>
          </div>

          <div class="form-group">
            <label>Lift Gate trucks serviced?</label>
            <div class="yes-no-toggle">
              <button type="button" class="yes-no-btn" onclick="setYesNo(this, 'liftGate', true)">Yes</button>
              <button type="button" class="yes-no-btn" onclick="setYesNo(this, 'liftGate', false)">No</button>
            </div>
          </div>

          <div id="liftGateDetails" style="display: none;">
            <div class="measurement-grid" style="margin-bottom: 12px;">
              <div class="measurement-input">
                <label>Lift Gate Projection</label>
                <input type="number" inputmode="decimal" placeholder="0">
                <span class="unit">in</span>
              </div>
            </div>
            <div class="form-group">
              <label>Lift Gate Stationary?</label>
              <div class="yes-no-toggle">
                <button type="button" class="yes-no-btn" onclick="setYesNo(this, 'liftGateStationary', true)">Yes</button>
                <button type="button" class="yes-no-btn" onclick="setYesNo(this, 'liftGateStationary', false)">No</button>
              </div>
            </div>
            <div class="form-group">
              <label>Cap on Lift Gate?</label>
              <div class="yes-no-toggle">
                <button type="button" class="yes-no-btn" onclick="setYesNo(this, 'liftGateCap', true)">Yes</button>
                <button type="button" class="yes-no-btn" onclick="setYesNo(this, 'liftGateCap', false)">No</button>
              </div>
            </div>
          </div>

          <div class="form-group" style="margin-top: 16px;">
            <label>Notes (obstructions, anomalies, etc.)</label>
            <textarea id="trailerNotes" placeholder="Describe any unusual trailer features..."></textarea>
          </div>
        </div>
      </div>
    </div>

    <div class="action-spacer"></div>
  </main>

  <!-- Action Bar -->
  <div class="action-bar">
    <button class="btn btn-secondary" onclick="showEmailModal()">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg>
      Email
    </button>
    <button class="btn btn-primary" onclick="generatePDF()">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>
      Save PDF
    </button>
  </div>

  <!-- Email Modal -->
  <div class="modal-overlay" id="emailModal">
    <div class="modal">
      <h2>Email Survey</h2>
      <div class="form-group">
        <label>Recipient Email</label>
        <input type="email" id="recipientEmail" placeholder="email@company.com">
      </div>
      <div class="form-group">
        <label>Subject</label>
        <input type="text" id="emailSubject" placeholder="Site Survey - [Customer Name]">
      </div>
      <div class="form-group">
        <label>Message (optional)</label>
        <textarea id="emailMessage" placeholder="Additional message..."></textarea>
      </div>
      <div class="modal-actions">
        <button class="btn btn-secondary" onclick="closeEmailModal()">Cancel</button>
        <button class="btn btn-primary" onclick="sendEmail()">Send</button>
      </div>
    </div>
  </div>

  <!-- Toast -->
  <div class="toast" id="toast">Survey saved!</div>

  <script>
    // Initialize
    document.addEventListener('DOMContentLoaded', function() {
      // Set today's date
      document.getElementById('surveyDate').valueAsDate = new Date();
      
      // Setup pit construction toggle
      document.querySelectorAll('input[name="pitConstruction"]').forEach(radio => {
        radio.addEventListener('change', function() {
          document.getElementById('existingPitConditions').style.display = 
            this.value === 'existing' ? 'block' : 'none';
        });
      });
    });

    // Survey type selection
    let activeSurveyTypes = new Set();

    function toggleSurveyType(type, btn) {
      btn.classList.toggle('active');
      
      if (activeSurveyTypes.has(type)) {
        activeSurveyTypes.delete(type);
      } else {
        activeSurveyTypes.add(type);
      }
      
      // Show/hide relevant sections
      document.getElementById('levelerSection').classList.toggle('active', activeSurveyTypes.has('leveler'));
      document.getElementById('shelterSection').classList.toggle('active', activeSurveyTypes.has('shelter'));
      document.getElementById('restraintSection').classList.toggle('active', activeSurveyTypes.has('restraint'));
      
      // Show position selector if any type is selected
      document.getElementById('positionSelector').style.display = 
        activeSurveyTypes.size > 0 ? 'block' : 'none';
    }

    // Section collapse/expand
    function toggleSection(header) {
      header.parentElement.classList.toggle('collapsed');
    }

    // Diagram toggle
    function toggleDiagram(toggle) {
      toggle.nextElementSibling.classList.toggle('show');
      toggle.querySelector('svg:last-child').style.transform = 
        toggle.nextElementSibling.classList.contains('show') ? 'rotate(180deg)' : '';
    }

    // Condition buttons
    function setCondition(btn, field, value) {
      const siblings = btn.parentElement.querySelectorAll('.condition-btn');
      siblings.forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
    }

    // Yes/No toggles
    function setYesNo(btn, field, value) {
      const siblings = btn.parentElement.querySelectorAll('.yes-no-btn');
      siblings.forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      
      // Special handling for lift gate
      if (field === 'liftGate') {
        document.getElementById('liftGateDetails').style.display = value ? 'block' : 'none';
      }
    }

    // Position management
    let positionCount = 1;
    let currentPosition = 1;

    function addPosition() {
      positionCount++;
      const tabs = document.querySelector('.position-tabs');
      const addBtn = tabs.querySelector('.add-position-btn');
      
      const newTab = document.createElement('button');
      newTab.className = 'position-tab';
      newTab.dataset.position = positionCount;
      newTab.textContent = `Position ${positionCount}`;
      newTab.onclick = function() { switchPosition(positionCount); };
      
      tabs.insertBefore(newTab, addBtn);
      switchPosition(positionCount);
    }

    function switchPosition(pos) {
      currentPosition = pos;
      document.querySelectorAll('.position-tab').forEach(tab => {
        tab.classList.toggle('active', parseInt(tab.dataset.position) === pos);
      });
      // In a full implementation, we'd save/load position data here
    }

    // Email modal
    function showEmailModal() {
      document.getElementById('emailModal').classList.add('show');
      // Pre-fill subject
      const customer = document.getElementById('customerName').value || 'Customer';
      document.getElementById('emailSubject').value = `Site Survey - ${customer}`;
    }

    function closeEmailModal() {
      document.getElementById('emailModal').classList.remove('show');
    }

    function sendEmail() {
      const email = document.getElementById('recipientEmail').value;
      const subject = encodeURIComponent(document.getElementById('emailSubject').value);
      const body = encodeURIComponent(generateEmailBody());
      
      window.location.href = `mailto:${email}?subject=${subject}&body=${body}`;
      closeEmailModal();
      showToast('Opening email client...');
    }

    function generateEmailBody() {
      const data = collectFormData();
      let body = `DOCK SITE SURVEY\n`;
      body += `${'='.repeat(40)}\n\n`;
      
      if (data.customerName) body += `Customer: ${data.customerName}\n`;
      if (data.address) body += `Address: ${data.address}\n`;
      if (data.date) body += `Date: ${data.date}\n`;
      if (data.repName) body += `Rep: ${data.repName}\n`;
      
      body += `\nSurvey Types: ${Array.from(activeSurveyTypes).join(', ')}\n`;
      
      // Add measurement data based on active surveys
      if (activeSurveyTypes.has('leveler')) {
        body += `\n--- DOCK LEVELER PIT INFO ---\n`;
        body += `(See attached PDF for complete measurements)\n`;
      }
      
      if (activeSurveyTypes.has('shelter')) {
        body += `\n--- DOCK SEAL/SHELTER INFO ---\n`;
        body += `(See attached PDF for complete measurements)\n`;
      }
      
      if (activeSurveyTypes.has('restraint')) {
        body += `\n--- VEHICLE RESTRAINT INFO ---\n`;
        body += `(See attached PDF for complete measurements)\n`;
      }
      
      return body;
    }

    function collectFormData() {
      return {
        customerName: document.getElementById('customerName').value,
        address: document.getElementById('address').value,
        date: document.getElementById('surveyDate').value,
        repName: document.getElementById('repName').value
      };
    }

    // PDF Generation (simplified - opens print dialog)
    function generatePDF() {
      showToast('Preparing PDF...');
      setTimeout(() => {
        window.print();
      }, 500);
    }

    // Toast notification
    function showToast(message) {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.classList.add('show');
      setTimeout(() => {
        toast.classList.remove('show');
      }, 2500);
    }

    // Close modal on overlay click
    document.getElementById('emailModal').addEventListener('click', function(e) {
      if (e.target === this) closeEmailModal();
    });

    // Register Service Worker for PWA
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('sw.js')
          .then(registration => {
            console.log('ServiceWorker registered:', registration.scope);
            
            // Check for updates
            registration.addEventListener('updatefound', () => {
              const newWorker = registration.installing;
              newWorker.addEventListener('statechange', () => {
                if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                  // New version available
                  showToast('New version available! Refresh to update.');
                }
              });
            });
          })
          .catch(error => {
            console.log('ServiceWorker registration failed:', error);
          });
      });
    }

    // Handle install prompt
    let deferredPrompt;
    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      deferredPrompt = e;
      // Show install button or banner if desired
      console.log('App can be installed');
    });
  </script>

  <!-- Print styles -->
  <style media="print">
    .app-header, .action-bar, .modal-overlay, .toast, .diagram-toggle {
      display: none !important;
    }
    
    body {
      background: white;
      color: black;
    }
    
    .section {
      break-inside: avoid;
      border: 1px solid #ccc;
      margin-bottom: 16px;
    }
    
    .section.collapsed .section-content {
      display: block !important;
    }
    
    .section-header {
      background: #f5f5f5;
    }
    
    .section-content {
      padding: 16px;
    }
    
    .survey-section {
      display: block !important;
    }
    
    .diagram-content {
      display: block !important;
    }
    
    input, textarea {
      border: 1px solid #ccc !important;
      background: white !important;
    }
    
    .action-spacer {
      display: none;
    }
  </style>
</body>
</html>
